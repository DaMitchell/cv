define("config",["command/about","command/clear","command/help","command/test","command/window","exports"],function(n,t,e,o,i,c){"use strict";function r(n,t){c[n]=t}var a;a=n["default"];var u;u=t["default"];var s;s=e["default"];var f;f=o["default"];var l;l=i["default"],r("default",{title:"Console CV",version:"2.0.0",commands:[new l,new s,new a,new u,new f],loading:$("#loading"),container:$("#console"),input:$("#input"),output:$("#output"),initOutput:['Type "help" to get a list of commands'," "]})}),define("events",["exports"],function(n){"use strict";function t(t,e){n[t]=e}t("default",{READY:"cv.console.ready",ENABLE:"cv.console.enable",DISABLE:"cv.console.disable",INPUT_SHOW:"cv.console.input.show",INPUT_HIDE:"cv.console.input.hide",OUTPUT:"cv.console.output",OUTPUT_CLEAR:"cv.console.outputclear",COMMAND_SUBMIT:"cv.console.command.submit",COMMAND_ERROR:"cv.console.command.error",COMMAND_NOT_FOUND:"cv.console.command.not.found",COMMAND_COMPLETE:"cv.console.command.complete"})}),define("main",["events","config","core/runner","core/tracking","view/custom-input","view/output","exports"],function(n,t,e,o,i,c,r){"use strict";function a(n,t){r[n]=t}function u(n){n.views.input=new p(n),n.views.output=new g(n),n.runner=new d(n),n.tracking=new m(n)}function s(n){var t=n.config;t.commands&&_.isArray(t.commands)&&t.commands.map(function(t,e){"object"==typeof t&&(n.commands.push(t),"function"==typeof n.commands[e].init&&n.commands[e].init(n))})}var f;f=n["default"];var l;l=t["default"];var d;d=e["default"];var m;m=o["default"];var p;p=i["default"];var g;g=c["default"];var v={config:l,commands:[],views:{input:null,output:null,prompt:null},runner:null,tracking:null};a("default",function(n){return n=n||{},v.config=$.extend({},v.config,n||{}),s(v),u(v),$(v).trigger(f.READY),v})}),define("command/about",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(){function n(n){c=n}function t(){return"about"}function e(){return"Information on what this is all about."}function i(){function n(){$(c).trigger(o.COMMAND_ERROR,"There was an error getting fetching the about information.")}function t(n){for(var t=0;t<n.lines.length;t++)$(c).trigger(o.OUTPUT,{content:n.lines[t],classes:["white","fade-in"]})}$.getJSON("data/about.json").done(t).fail(n)}var c;return{init:n,getCommand:t,getDescription:e,execute:i}})}),define("command/clear",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(){function n(n){c=n}function t(){return"clear"}function e(){return"Clear the window of all past output."}function i(){$(c).trigger(o.OUTPUT_CLEAR)}var c;return{init:n,getCommand:t,getDescription:e,execute:i}})}),define("command/help",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(){function n(n){s=n}function t(){return"help"}function e(){return["Display help information"]}function i(n){var t=[{content:s.config.title+' <span class="white">version</span> <span class="yellow">'+s.config.version+"</span>"},{}];t=t.concat(n.length?a(n):c()),t.map(function(n){$(s).trigger(o.OUTPUT,n)})}function c(){var n=[{content:"Usage:",classes:["yellow"]},{content:"  command [arguments]",classes:["fade-in"]},{},{classes:["yellow"],content:"Available commands:"}];return n.concat(r(),[{},{content:"See 'help &lt;command&gt;' for more information on a specific command."},{}])}function r(){var n,t,e=0,o=[],i=s.commands.map(function(n){return"function"!=typeof n.getCommand?!1:(t=n.getCommand(),t.length>e&&(e=t.length),{name:t,description:"function"==typeof n.getDescription?n.getDescription():""})});return i.map(function(t){$.makeArray(t.description).map(function(i,c){n=0===c?"  "+t.name+u(i,e-t.name.length+4):"  "+u(i,e+4),o.push({content:n,classes:["white","fade-in"]})})}),o}function a(n){var t=[{content:"There isn't any extra help for this command",classes:["blue","fade-in"]}],e=_.find(s.commands,function(t){return t.getCommand()===n[0]});return e&&"function"==typeof e.getHelp&&(t=$.makeArray(e.getHelp()).map(function(n){return _.isString(n)&&(n={content:n,classes:["fade-in"]}),n})),t}function u(n,t){var e,o="";for(e=0;t>e;e++)o+=" ";return o+n}var s;return{init:n,getCommand:t,getDescription:e,execute:i}})}),define("command/test",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(){function n(n){c=n}function t(){return"test"}function e(){return"Some test lines to see the different theme colors"}function i(){var n="This is some test text to see the colors",t=["black","red","green","yellow","blue","magenta","cyan","white"];t.map(function(t){$(c).trigger(o.OUTPUT,{content:n,classes:[t]})})}var c;return{init:n,getCommand:t,getDescription:e,execute:i}})}),define("command/window",["events","util/transition-event","exports"],function(n,t,e){"use strict";function o(n,t){e[n]=t}var i;i=n["default"];var c;c=t["default"],o("default",function(){function n(n){a=n}function t(){return"window"}function e(){return["Allows you to change the size of the window.","Will work depending on you screen size."]}function o(){return[{content:"Usage:",classes:["yellow"]},{content:"  window &lt;size&gt;",classes:["fade-in"]},{content:"Sizes:",classes:["yellow"]},{content:"  min",classes:["fade-in"]},{content:"  max",classes:["fade-in"]},{content:"Description:",classes:["yellow"]},{content:"  Allow you to change the size of the console window",classes:["fade-in"]},{content:"  If you are using this command on a mobile device nothing will happen as the console is always at max.",classes:["fade-in"]}]}function r(n){var t=$.Deferred(),e=$(a.config.container),o=n[0];if(!e.hasClass(o)){var r;switch(o){case"min":case"max":r=o}if(r){var u=c();return u&&e.one(c(),function(){console.log("window transition fin"),t.resolve()}),e.removeClass("min max").addClass(r),u?t.promise():t.resolve()}$(a).trigger(i.OUTPUT,{content:'Sorry "'+o+'" is an invalid size'})}}var a;return{init:n,getCommand:t,getDescription:e,getHelp:o,execute:r}})}),define("core/runner",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(n){function t(t,e){var i;if(e.command.length){var c=_.find(n.commands,function(n){return"function"!=typeof n.getCommand?!1:n.getCommand()===$.trim(e.command)});c&&"function"==typeof c.execute?i=c.execute(e.args):$(n).trigger(o.COMMAND_NOT_FOUND,e)}var r=function(){$(n).trigger(o.COMMAND_COMPLETE)};i&&i.done?i.done(r):r()}return $(n).off(o.COMMAND_SUBMIT,t).on(o.COMMAND_SUBMIT,t),{execute:t}})}),define("core/tracking",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(n){function t(n,t){"function"==typeof ga&&ga("send","event","command",t.command,t.args.join(" "))}$(n).off(o.COMMAND_SUBMIT,t).on(o.COMMAND_SUBMIT,t)})}),define("util/command-history",["exports"],function(n){"use strict";function t(t,e){n[t]=e}function e(){a=r.length}function o(n){r.push(n)}function i(){return 0>a-1?r[a]:(a--,r[a])}function c(){return a++,r[a]}var r=[],a=0;t("default",{resetIndex:e,addHistory:o,getNextCommand:i,getPreviousCommand:c})}),define("util/linkify",["exports"],function(n){"use strict";function t(t,e){n[t]=e}t("default",function(n){if(void 0===n)return"";var t=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,e=/(^|[^\/])(www\.[\S]+(\b|$))/gim,o=/\w+@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6})+/gim;return n.replace(t,'<a href="$&" target="_blank">$&</a>').replace(e,'$1<a href="http://$2" target="_blank">$2</a>').replace(o,'<a href="mailto:$&">$&</a>')})}),define("util/transition-event",["exports"],function(n){"use strict";function t(t,e){n[t]=e}function e(){var n,t=document.createElement("fakeelement"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(n in e)if(void 0!==t.style[n])return e[n]}var o;t("default",function(){return o||(o=e()),o})}),define("view/custom-input",["events","view/prompt","util/command-history","exports"],function(n,t,e,o){"use strict";function i(n,t){o[n]=t}var c;c=n["default"];var r;r=t["default"];var a;a=e["default"],i("default",function(n){function t(){var n=y.prev(),t=y.next();_===T.length?(n.text(T),y.html("&nbsp;"),t.text("")):0===_?(n.text(""),y.text(T.slice(0,1)),t.text(T.slice(1))):(n.text(T.slice(0,_)),y.text(T.slice(_,_+1)),t.text(_===T.length-1?"":T.slice(_+1)))}function e(n){_===T.length?T+=n:T=0===_?n+T:T.slice(0,_)+n+T.slice(_),_+=n.length,t()}function o(){var e=T.split(" "),o=e.shift();$(n).trigger(c.COMMAND_SUBMIT,{prompt:w.getPromptText(),command:o,args:e}),T.length&&a.addHistory(T),a.resetIndex(),T="",_=T.length,t()}function i(n){var e=n.which;e===M.left?_=0>_-1?0:_-1:e===M.right&&(_=_+1>T.length?T.length:_+1),t()}function u(n){var e,o=n.which;o===M.up?e=a.getNextCommand():o===M.down&&(e=a.getPreviousCommand()),T=void 0===e?"":e,_=T.length,t()}function s(){""!==T&&_>0&&(T=T.slice(0,_-1)+T.slice(_,T.length),_--,t())}function f(){""!==T&&_<T.length&&(T=T.slice(0,_)+T.slice(_+1,T.length),t())}function l(){var n=C.find(".clipboard-input");return n.focus(),setTimeout(function(){e(n.val()),n.blur().val("")},10),!0}function d(){_=0,t()}function m(){_=T.length,t()}function p(n){!n.ctrlKey&&!n.altKey&&$.inArray(n.which,[91,93])<0&&e(String.fromCharCode(n.which))}function g(){C.show().addClass("fade-in"),v(),t()}function v(){y.addClass("enable"),$(document).off("keypress",p).on("keypress",p)}function h(){$(document).off("keypress",p),y.removeClass("enable")}var w=new r(n),C=$(n.config.input),y=C.find(".cursor"),T="",_=T.length,x=new window.keypress.Listener,M={enter:13,left:37,up:38,right:39,down:40};x.simple_combo("tab",function(){return!1}),x.simple_combo("enter",o),x.simple_combo("left",i),x.simple_combo("right",i),x.simple_combo("up",u),x.simple_combo("down",u),x.simple_combo("backspace",s),x.simple_combo("delete",f),x.simple_combo("cmd v",l),x.simple_combo("ctrl v",l),x.simple_combo("cmd left",d),x.simple_combo("ctrl left",d),x.simple_combo("cmd right",m),x.simple_combo("ctrl right",m),$(n).off(c.READY,g).on(c.READY,g),$(document).on("click.console",function(n){$(n.target).closest("#console").hasClass("console")||h()}),$(n.config.container).on("click",v)})}),define("view/input",["events","view/prompt","util/command-history","exports"],function(n,t,e,o){"use strict";function i(n,t){o[n]=t}var c;c=n["default"];var r;r=t["default"];var a;a=e["default"],i("default",function(n){function t(){$(n.config.input).show().addClass("fade-in"),u.focus()}function e(){$(n.config.input).hide()}function o(t){var e;if(t.keyCode===s.enter){var o=u.val(),i=o.split(" "),r=i.shift();$(n).trigger(c.COMMAND_SUBMIT,{prompt:f.getPromptText(),command:r,args:i}),o.length&&a.addHistory(o),a.resetIndex(),u.val("")}else t.keyCode===s.up?(e=a.getNextCommand(),u.val(void 0===e?"":e)):t.keyCode===s.down&&(e=a.getPreviousCommand(),u.val(void 0===e?"":e))}function i(n){(n.keyCode===s.up||n.keyCode===s.down)&&(u[0].selectionStart=u[0].selectionEnd=u[0].value.length)}var u=$(n.config.input).find("input"),s={enter:13,up:38,down:40},f=new r(n);return $(n).off(c.READY,t).on(c.READY,t),$(n).off(c.INPUT_SHOW,t).on(c.INPUT_SHOW,t),$(n).off(c.INPUT_HIDE,e).on(c.INPUT_HIDE,e),u.off("keydown",o).on("keydown",o),u.off("keyup",i).on("keyup",i),$(n.config.container).click(function(){u.focus()}),{}})}),define("view/output",["events","util/linkify","exports"],function(n,t,e){"use strict";function o(n,t){e[n]=t}var i;i=n["default"];var c;c=t["default"],o("default",function(n){function t(n,t){var e=["line"];void 0!==t&&$.isArray(t)&&(e=e.concat(t));var o=$("<div>").addClass(e.join(" ")).html(c(n));f.append(o),l.scrollTop(l[0].scrollHeight)}function e(n,e){t(e.prompt+" "+e.command+" "+e.args.join(" "))}function o(n,e){t('The command "'+e.command+'" could not be found.')}function r(n,e){t(e,["red"])}function a(){$(".nano").nanoScroller()}function u(n,e){t(e.content,e.classes)}function s(){f.find(".line").remove()}var f=$(n.config.output),l=$(n.config.container).find(".console-content");$(n).on(i.COMMAND_NOT_FOUND,o),$(n).on(i.COMMAND_ERROR,r),$(n).on(i.COMMAND_SUBMIT,e),$(n).on(i.COMMAND_COMPLETE,a),$(n).on(i.OUTPUT_CLEAR,s),$(n).on(i.OUTPUT,u);for(var d=0,m=n.config.initOutput.length;m>d;d++)t(n.config.initOutput[d],["fade-in"]);return $(".nano").nanoScroller(),{addOutputLine:t}})}),define("view/prompt",["events","exports"],function(n,t){"use strict";function e(n,e){t[n]=e}var o;o=n["default"],e("default",function(n){function t(n,t){for(n=n.toString();n.length<t;)n="0"+n;return n}function e(){var n=new Date,e=t(n.getHours(),2)+":"+t(n.getMinutes(),2)+":"+t(n.getSeconds(),2);c.find(".time").text(e)}function i(){return $.trim(c.text())}var c=$(n.config.input).find(".prompt");return $(n).on(o.COMMAND_SUBMIT,e),$(n).on(o.READY,e),{getPromptText:i}})});